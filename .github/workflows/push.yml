name: test

on:
- push
- pull_request

jobs:
  test:
    strategy:
      fail-fast: false
      matrix:
        task: ['jekyll:check', 'jekyll:check_external_links']
        experimental: [false, true]
    runs-on: ubuntu-latest
    steps:
    - uses: actions/checkout@v3
    - uses: ruby/setup-ruby@v1
      with:
        bundler-cache: true
    - name: Run tests
      run: bundle exec rake ${{ matrix.task }}
