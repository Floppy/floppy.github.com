---
layout: post
title: Some successful CurrentCost hacking
tags:
- currentcost
- gem
- github
- ruby
---
<p>
After a bit of work, I&#8217;ve finally got my <a href="http://www.currentcost.com">CurrentCost</a> meter working in Ruby, and I now have a power monitor sitting in my system tray! There were a few stages involved&#8230;
</p>

<p>
<strong>Serial comms:</strong> The ruby-serialport library that already existed for Ruby was no good to me. Firstly, it didn&#8217;t seem to be in a working state, but more importantly, the license it is under (GPL) is no good to me. So, I had to write my own. I&#8217;ve created a nice simple serial library (including a gem) for Ruby called RB232, which is available on <a href="http://github.com/Floppy/rb232">GitHub</a>. It only supports reading at the moment, and only works on Linux systems, but it&#8217;s a start. Next!
</p>

<p>
<strong>Reading CurrentCost data:</strong> Once RB232 was in place, this was pretty easy. Just create a couple of classes to wrap up the process of getting data from the meter, and away you go. Easy. Also released as a Ruby gem on <a href="http://github.com/Floppy/currentcost-ruby">Github</a>.
</p>

<p><img src="http://www.floppy.org.uk/assets/2008/8/22/currentcost-tray-monitor.png" alt="tray monitor"/></p>

<p>
<strong>User interface:</strong> Last step was to make a simple user interface for the meter, which you can see in the picture above. It&#8217;s a simple tray icon that changes colour based on power usage. It&#8217;s based heavily on another very useful tool called <a href="http://rubyforge.org/projects/cctrayrb/">cctrayrb</a>, so many thanks to Daniel Parnell for doing the heavy GUI lifting there. The app is included as part of the currentcost-ruby gem mentioned above.
</p>

<p>
Anyway, it&#8217;s all freely available, so if you have a CurrentCost meter and a serial cable for it, you can grab the code and get going. Enjoy :)
</p>
